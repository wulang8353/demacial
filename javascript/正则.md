# 正则表达式

[正则表达式快速参考MDN](https://msdn.microsoft.com/zh-cn/library/az24scfc.aspx)

## 字符集快速查找

![常用元字符](/javascript/img/常用元字符.png)
![常用限定符](/javascript/img/常用限定符.png)
![常用反义代码](/javascript/img/反义代码.png)
![分组语法](/javascript/img/分组语法.png)
![懒惰限定符](/javascript/img/懒惰限定符.png)

## 简述

- 单词匹配

`\b` ：精确查找某个固定单词，代表着单词的开头和结尾，也就是单词的分界处，类似`\bhi\b`，并且不会匹配单词之间用来分隔的空格、标点符号或者换行

`.`  ： 匹配除了换行符意外的任意字符

`*`  ： 指定之前的内容可以连续重复任意次

*例子*： `/\bhi\b.*\bLucy\b/`  >  `.*`任意数量的不包含换行的字符 > 先是hi这个单词，然后中间是任意不换行字符，最后遇到Lucy这个单词

`\s` ： 匹配任意的空白符（空格）

`\w` ： 匹配数字或者下划线或者汉字符

*例子*： 
`/\ba\w*\b/` ： 匹配以字母a的单词开头，然后任意数量的数字或者字符，最后单词结束 > an2n1n

`/\b\w{6}\b/` ： 匹配刚好有6个字符的单词

- 工整匹配

`^` ： 匹配字符串开始

`$` ： 匹配字符串结束

*例子* ： `/^\d{5,12}$/` 匹配的字符串刚好要是5到12个数字，也就是说，工整匹配

- 字符转义——针对元字符本身的使用需要转义

`.` 和 `*`  若要匹配这两个字符必须先转义，也就是说形式得是  `\.` 和`\*`

- 多个字符中取某个进行匹配

`[aeiou]` 匹配任意一个英文原因字符   `[.?!]` 匹配惹蚂蚁一个标点符号

`[0-9]`等同于`\d`    `[a-z0-9A-Z]` 等同于 `\w`

 *例子*：
 
  `/\(?0\d{2}[) -]?\d{8}/` 首先转义字符`\(`出现0次或1次，然后是一个数字0，紧接着是两个任意数字，随后匹配`) -`匹配这三个符号中任意一个而且0次或1次，最后是8个数字  如 022-12125214
  
- 分支条件

满足任意其中一种规则都能匹配，用`|`符号分隔

`0\d{2}-\d{8}|0\d{3}-\d{7}` ： 匹配两种以连字号分隔的电话号码：一种是三位区号，8位本地号(如010-12345678)，一种是4位区号，7位本地号(0376-2233445)

`/\(?0\d{2}\)?[- ]?\d{8}|0\d{2}[- ]?\d{8}/` ：匹配3位区号的电话号码，其中区号可以用小括号括起来，也可以不用，区号与本地号间可以用连字号或空格间隔，也可以没有间隔

`/\d{5}-\d{4}|\d{5}/`  ： 可以匹配9位数字或者5位数字
`/\d{5}|\d{5}-\d{4}/`  ： 可以匹配5位数字或者9位数字 

但是分支匹配是从左到右的测试每个条件，也就是说如果满足第一个就不会测试第二个了，如果想尽可能多的匹配就应该用第一种

- 分组匹配 —— 多字符匹配

`/(\d{1,3}\.){3}\d{1,3}/` ： 简单的IP地址匹配，`\d{1,3}\.` 表示有1到3位的数字后跟上一个符号 `.`，然后用`()`括起来，这就表示一个分组，然后这个分组重复三次`{3}`，最后加上一个1个到3个的数字`{1,3}`

但是可能匹配到不存在的地址，如999,888，因为地址中每个数字不能大于255

`/((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)/` 

`2[0-4]\d|25[0-5]|[01]?\d\d?` ：首先数字2，然后从0-4中去某个数字，随后一个数字  或者  数字25后匹配0-5中恩义某个数字 或者 0-1某个数字，出现0次或者1次，随后一个数字，再一个出现0次或者1次的数字

`(2[0-4]\d|25[0-5]|[01]?\d\d?)\.` ： 转移符号`.`

`((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}` ： 上述规则出现三次，类似255.255.255

`(2[0-4]\d|25[0-5]|[01]?\d\d?)` ： 最后匹配一个具有第一个规则的数字即可

- 后向引用 

作用 ： 重复搜索前面某个分组匹配的文本
规则 ： 从左向右，以分组的左括号为标志，第一个出现的左括号的为第一组，以此类推

`/\b(\w+)\b\s+\1\b/` ： 
可以用来匹配重复的单词，像go go, 或者kitty kitty。这个表达式首先是一个单词，也就是单词开始处和结束处之间的多于一个的字母或数字(\b(\w+)\b)，这个单词会被捕获到编号为1的分组中，然后是1个或几个空白符(\s+)，最后是分组1中捕获的内容（也就是前面匹配的那个单词）(\1)。

你也可以自己指定子表达式的组名。要指定一个子表达式的组名，请使用这样的语法：(?<Word>\w+)(或者把尖括号换成'也行：(?'Word'\w+)),这样就把\w+的组名指定为Word了。要反向引用这个分组捕获的内容，你可以使用\k<Word>,所以上一个例子也可以写成这样：\b(?<Word>\w+)\b\s+\k<Word>\b

- 零宽断言 ： 简单来说就是指定一个位置，然后匹配在这个位置之前的规则（不包含这个位置）

(?=exp)也叫零宽度正预测先行断言，它断言自身出现的位置的后面能匹配表达式exp。比如\b\w+(?=ing\b)，匹配以ing结尾的单词的前面部分(除了ing以外的部分)，如查找I'm singing while you're dancing.时，它会匹配sing和danc。
(?<=exp)也叫零宽度正回顾后发断言，它断言自身出现的位置的前面能匹配表达式exp。比如(?<=\bre)\w+\b会匹配以re开头的单词的后半部分(除了re以外的部分)，例如在查找reading a book时，它匹配ading。
假如你想要给一个很长的数字中每三位间加一个逗号(当然是从右边加起了)，你可以这样查找需要在前面和里面添加逗号的部分：((?<=\d)\d{3})+\b，用它对1234567890进行查找时结果是234567890。
下面这个例子同时使用了这两种断言：(?<=\s)\d+(?=\s)匹配以空白符间隔的数字(再次强调，不包括这些空白符)


